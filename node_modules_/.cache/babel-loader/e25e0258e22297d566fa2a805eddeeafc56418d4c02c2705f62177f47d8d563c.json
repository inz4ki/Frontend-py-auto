{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport ModalCadastro from '../components/ModalCadastro.vue';\nimport { http } from '../service/api';\nimport draggable from 'vuedraggable';\nimport Cookie from 'js-cookie';\nexport default {\n  components: {\n    draggable,\n    ModalCadastro\n  },\n  data() {\n    return {\n      pk_id_tarefa: this.$route.params.pk_id_tarefa,\n      etapas: [],\n      dragging: false,\n      tarefa: ''\n    };\n  },\n  props: ['pk_id_tarefa'],\n  mounted() {\n    this.listarEtapas();\n    http.get(`tarefa/${this.pk_id_tarefa}`, http.defaults.headers.Authorization = 'Bearer ' + Cookie.get('_usuario_token')).then(response => {\n      this.tarefa = response.data;\n    });\n  },\n  methods: {\n    listarEtapas() {\n      http.get(`etapas/${this.pk_id_tarefa}`, http.defaults.headers.Authorization = 'Bearer ' + Cookie.get('_usuario_token')).then(response => {\n        this.etapas = response.data;\n      });\n    },\n    deletarTarefa(tarefa) {\n      if (confirm('Você deseja realmente Excluir a Tarefa?') == true) {\n        http.delete(`tarefa/${tarefa.pk_id_tarefa}`, {\n          data: tarefa\n        }, http.defaults.headers.Authorization = 'Bearer ' + Cookie.get('_usuario_token')).then(response => {\n          alert(\"Tarefa excluida com sucesso\");\n          this.$router.push('/');\n          return response;\n        }).catch(error => {\n          if (error.response.status = 404) {\n            alert('Erro ao Excluir');\n          }\n        });\n      } else {}\n    },\n    deletarEtapa(element) {\n      if (confirm('Você deseja realmente Excluir essa Etapa?') == true) {\n        http.delete(`etapa/${element.pk_id_etapa}`, {\n          data: element\n        }, http.defaults.headers.Authorization = 'Bearer ' + Cookie.get('_usuario_token')).then(response => {\n          alert(\"Etapa excluida com sucesso\");\n          this.listarEtapas();\n          return response;\n        }).catch(error => {\n          if (error.response.status = 404) {\n            alert('Erro ao Excluir');\n          }\n        });\n      } else {}\n    },\n    atualizarOrdem(e) {\n      console.log(e);\n      this.etapas.forEach(async (etapas, key) => {\n        setTimeout(() => {\n          etapas.ordem = key + 1;\n          http.put(`editar/etapas`, this.etapas, http.defaults.headers.Authorization = 'Bearer ' + Cookie.get('_usuario_token')).then(response => {\n            return console.log(response);\n          }).catch(error => {\n            if (error.response.status = 404) {\n              console.log(error);\n            }\n          });\n        }, 5000);\n      });\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["ModalCadastro","http","draggable","Cookie","components","data","pk_id_tarefa","$route","params","etapas","dragging","tarefa","props","mounted","listarEtapas","get","defaults","headers","Authorization","then","response","methods","deletarTarefa","confirm","delete","alert","$router","push","catch","error","status","deletarEtapa","element","pk_id_etapa","atualizarOrdem","e","console","log","forEach","key","setTimeout","ordem","put"],"sourceRoot":"","sources":["C:\\Users\\vinicius.martins\\Desktop\\pasta\\teste\\projeto-automacao\\src\\views\\EtapaView.vue"],"sourcesContent":["<script>\nimport ModalCadastro from '../components/ModalCadastro.vue'\nimport { http } from '../service/api'\nimport draggable from 'vuedraggable'\nimport Cookie from 'js-cookie';\n\nexport default {\n  components: {\n    draggable,\n    ModalCadastro,\n\n  },\n  data() {\n    return {\n      pk_id_tarefa: this.$route.params.pk_id_tarefa,\n      etapas: [],\n      dragging: false,\n      tarefa: '',\n    }\n  },\n  props: ['pk_id_tarefa'],\n  mounted() {\n    this.listarEtapas();\n    http.get(`tarefa/${this.pk_id_tarefa}`,\n      http.defaults.headers.Authorization = 'Bearer ' + Cookie.get('_usuario_token')\n    )\n      .then(response => {\n        this.tarefa = response.data;\n      });\n  },\n  methods: {\n    listarEtapas() {\n      http.get(`etapas/${this.pk_id_tarefa}`,\n        http.defaults.headers.Authorization = 'Bearer ' + Cookie.get('_usuario_token')\n      )\n        .then(response => {\n          this.etapas = response.data;\n        });\n    },\n    deletarTarefa(tarefa) {\n      if (confirm('Você deseja realmente Excluir a Tarefa?') == true) {\n        http.delete(`tarefa/${tarefa.pk_id_tarefa}`, { data: tarefa },\n          http.defaults.headers.Authorization = 'Bearer ' + Cookie.get('_usuario_token')\n        )\n          .then(response => {\n            alert(\"Tarefa excluida com sucesso\");\n            this.$router.push('/');\n            return response;\n          }).catch((error) => {\n            if (error.response.status = 404) {\n              alert('Erro ao Excluir');\n            }\n          })\n      }\n      else { }\n    },\n    deletarEtapa(element) {\n      if (confirm('Você deseja realmente Excluir essa Etapa?') == true) {\n        http.delete(`etapa/${element.pk_id_etapa}`, { data: element },\n          http.defaults.headers.Authorization = 'Bearer ' + Cookie.get('_usuario_token')\n        )\n          .then(response => {\n            alert(\"Etapa excluida com sucesso\");\n            this.listarEtapas();\n            return response;\n          }).catch((error) => {\n            if (error.response.status = 404) {\n              alert('Erro ao Excluir');\n            }\n          })\n      } else { }\n    },\n    atualizarOrdem(e) {\n      console.log(e)\n      this.etapas.forEach(async (etapas, key) => {\n        setTimeout(() => {\n          etapas.ordem = key + 1\n          http.put(`editar/etapas`, this.etapas,\n            http.defaults.headers.Authorization = 'Bearer ' + Cookie.get('_usuario_token')\n          )\n            .then(response => {\n              return console.log(response);\n            }).catch((error) => {\n              if (error.response.status = 404) {\n                console.log(error);\n              }\n            });\n        }, 5000);\n\n      })\n\n    },\n  },\n\n}\n</script>\n\n<template>\n  <div class=\"col-sm-8\">\n    <div>\n      <h1>{{ tarefa.nome_tarefa }}</h1>\n      <button class=\"btn btn-success btn-sm\">Voltar para as Tarefas</button>\n      <hr>\n    </div>\n\n    <table class=\"table\">\n      <thead class=\"table-dark\">\n        <tr>\n          <th scope=\"col\">Ordem</th>\n          <th scope=\"col\">Etapa</th>\n          <th scope=\"col\">Ação</th>\n          <th scope=\"col\">Tempo de Execução</th>\n          <th scope=\"col\"></th>\n        </tr>\n      </thead>\n      <!-- <tbody>\n                                <tr v-for=\"etapa in etapas\" :key=\"etapa.pk_id_etapa\">\n                                  <td>{{ etapa.pk_id_etapa }}</td>\n                                  <td>{{ etapa.nome_etapa }}</td>\n                                  <td>{{ etapa.acao }}</td>\n                                  <td>{{ etapa.tempo_execucao }} segundos</td>\n                                  <td><button class=\"btn btn-sm btn-danger\" @click=\"deletarEtapa(etapa)\">Deletar Etapa</button></td>\n                                </tr>\n                              </tbody> -->\n\n      <draggable @end=\"atualizarOrdem\" v-model=\"etapas\" tag=\"tbody\" item-key=\"pk_id_etapa\">\n        <template #item=\"{ element, index }\" :key=\"index\">\n          <tr>\n            <td>{{ index + 1 }}</td>\n            <td>{{ element.nome_etapa }}</td>\n            <td>{{ element.acao }}</td>\n            <td>{{ element.tempo_execucao }} segundos</td>\n            <td><button class=\"btn btn-sm btn-danger\" @click=\"deletarEtapa(element)\">Deletar Etapa</button></td>\n          </tr>\n        </template>\n      </draggable>\n    </table>\n    <div class=\"btn-toolbar margem\" role=\"group\">\n      <div class=\"btn-group mr-2\">\n        <button class=\"btn btn-lg btn-outline-danger\" @click=\"deletarTarefa(tarefa)\">Excluir Tarefa</button>\n        <ModalCadastro class=\"row\" variant=\"outline-success btn-lg\">\n        </ModalCadastro>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\nh1 {\n  margin-top: 15px;\n}\n\n.margem {\n  margin-bottom: 30px;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}