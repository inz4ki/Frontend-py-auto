{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport ModalCadastro from '../components/ModalCadastro.vue';\nimport { http } from '../service/api';\nimport draggable from 'vuedraggable';\nexport default {\n  components: {\n    draggable,\n    ModalCadastro\n  },\n  data() {\n    return {\n      pk_id_tarefa: this.$route.params.pk_id_tarefa,\n      etapas: [],\n      drag: false,\n      tarefa: ''\n    };\n  },\n  props: ['pk_id_tarefa'],\n  mounted() {\n    this.listarEtapas();\n    http.get(`tarefa/${this.pk_id_tarefa}`).then(response => {\n      this.tarefa = response.data;\n    });\n  },\n  methods: {\n    listarEtapas() {\n      http.get(`etapas/${this.pk_id_tarefa}`).then(response => {\n        this.etapas = response.data;\n      });\n    },\n    deletarTarefa(tarefa) {\n      http.delete(`tarefa/${tarefa.pk_id_tarefa}`, {\n        data: tarefa\n      }).then(response => {\n        alert(\"Tarefa excluida com sucesso\");\n        this.$router.push('/');\n        return response;\n      }).catch(error => {\n        if (error.response.status = 404) {\n          alert('Erro ao Excluir');\n        }\n      });\n    },\n    deletarEtapa(etapa) {\n      http.delete(`etapa/${etapa.pk_id_etapa}`, {\n        data: etapa\n      }).then(response => {\n        alert(\"Etapa excluida com sucesso\");\n        this.listarEtapas();\n        return response;\n      }).catch(error => {\n        if (error.response.status = 404) {\n          alert('Erro ao Excluir');\n        }\n      });\n    }\n  }\n};","map":{"version":3,"mappings":";AACA,OAAOA,aAAY,MAAO,iCAAgC;AAC1D,SAASC,IAAG,QAAS,gBAAe;AACpC,OAAOC,SAAQ,MAAO,cAAa;AAEnC,eAAe;EACbC,UAAU,EAAE;IACVD,SAAS;IACTF;EAEF,CAAC;EACDI,IAAI,GAAG;IACL,OAAO;MACLC,YAAY,EAAE,IAAI,CAACC,MAAM,CAACC,MAAM,CAACF,YAAY;MAC7CG,MAAM,EAAE,EAAE;MACVC,IAAI,EAAC,KAAK;MACVC,MAAM,EAAE;IACV;EACF,CAAC;EACDC,KAAK,EAAE,CAAC,cAAc,CAAC;EACvBC,OAAO,GAAG;IACR,IAAI,CAACC,YAAY,EAAE;IACnBZ,IAAI,CAACa,GAAG,CAAE,UAAS,IAAI,CAACT,YAAa,EAAC,EACnCU,IAAI,CAACC,QAAO,IAAK;MAChB,IAAI,CAACN,MAAK,GAAIM,QAAQ,CAACZ,IAAI;IAC7B,CAAC,CAAC;EACN,CAAC;EACDa,OAAO,EAAE;IACPJ,YAAY,GAAG;MACbZ,IAAI,CAACa,GAAG,CAAE,UAAS,IAAI,CAACT,YAAa,EAAC,EACnCU,IAAI,CAACC,QAAO,IAAK;QAChB,IAAI,CAACR,MAAK,GAAIQ,QAAQ,CAACZ,IAAI;MAC7B,CAAC,CAAC;IACN,CAAC;IACDc,aAAa,CAACR,MAAM,EAAE;MACpBT,IAAI,CAACkB,MAAM,CAAE,UAAST,MAAM,CAACL,YAAa,EAAC,EAAE;QAAED,IAAI,EAAEM;MAAO,CAAC,CAC7D,CACGK,IAAI,CAACC,QAAO,IAAK;QAChBI,KAAK,CAAC,6BAA6B,CAAC;QACpC,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;QACtB,OAAON,QAAQ;MACjB,CAAC,CAAC,CAACO,KAAK,CAAEC,KAAK,IAAK;QAClB,IAAIA,KAAK,CAACR,QAAQ,CAACS,MAAK,GAAI,GAAG,EAAE;UAC/BL,KAAK,CAAC,iBAAiB,CAAC;QAC1B;MACF,CAAC;IACL,CAAC;IACDM,YAAY,CAACC,KAAK,EAAE;MAClB1B,IAAI,CAACkB,MAAM,CAAE,SAAQQ,KAAK,CAACC,WAAY,EAAC,EAAE;QAAExB,IAAI,EAAEuB;MAAM,CAAC,CACzD,CACGZ,IAAI,CAACC,QAAO,IAAK;QAChBI,KAAK,CAAC,4BAA4B,CAAC;QACnC,IAAI,CAACP,YAAY,EAAE;QACnB,OAAOG,QAAQ;MACjB,CAAC,CAAC,CAACO,KAAK,CAAEC,KAAK,IAAK;QAClB,IAAIA,KAAK,CAACR,QAAQ,CAACS,MAAK,GAAI,GAAG,EAAE;UAC/BL,KAAK,CAAC,iBAAiB,CAAC;QAC1B;MACF,CAAC;IACL;EACF;AACF","names":["ModalCadastro","http","draggable","components","data","pk_id_tarefa","$route","params","etapas","drag","tarefa","props","mounted","listarEtapas","get","then","response","methods","deletarTarefa","delete","alert","$router","push","catch","error","status","deletarEtapa","etapa","pk_id_etapa"],"sourceRoot":"","sources":["C:\\Users\\vinicius.martins\\Desktop\\pasta\\teste\\projeto-automacao\\src\\views\\EtapaView.vue"],"sourcesContent":["<script>\nimport ModalCadastro from '../components/ModalCadastro.vue'\nimport { http } from '../service/api'\nimport draggable from 'vuedraggable'\n\nexport default {\n  components: {\n    draggable,\n    ModalCadastro,\n\n  },\n  data() {\n    return {\n      pk_id_tarefa: this.$route.params.pk_id_tarefa,\n      etapas: [],\n      drag:false,\n      tarefa: ''\n    }\n  },\n  props: ['pk_id_tarefa'],\n  mounted() {\n    this.listarEtapas();\n    http.get(`tarefa/${this.pk_id_tarefa}`)\n      .then(response => {\n        this.tarefa = response.data;\n      });\n  },\n  methods: {\n    listarEtapas() {\n      http.get(`etapas/${this.pk_id_tarefa}`)\n        .then(response => {\n          this.etapas = response.data;\n        });\n    },\n    deletarTarefa(tarefa) {\n      http.delete(`tarefa/${tarefa.pk_id_tarefa}`, { data: tarefa },\n      )\n        .then(response => {\n          alert(\"Tarefa excluida com sucesso\");\n          this.$router.push('/');\n          return response;\n        }).catch((error) => {\n          if (error.response.status = 404) {\n            alert('Erro ao Excluir');\n          }\n        })\n    },\n    deletarEtapa(etapa) {\n      http.delete(`etapa/${etapa.pk_id_etapa}`, { data: etapa },\n      )\n        .then(response => {\n          alert(\"Etapa excluida com sucesso\");\n          this.listarEtapas();\n          return response;\n        }).catch((error) => {\n          if (error.response.status = 404) {\n            alert('Erro ao Excluir');\n          }\n        })\n    },\n  }\n}\n</script>\n\n<template>\n  <div class=\"col-sm-8\">\n    <div>\n      <h1>{{ tarefa.nome_tarefa }}</h1>\n      <hr>\n    </div>\n\n    <table class=\"table\">\n      <thead class=\"table-dark\">\n        <tr>\n          <th scope=\"col\">Id</th>\n          <th scope=\"col\">Etapa</th>\n          <th scope=\"col\">Ação</th>\n          <th scope=\"col\">Tempo de Execução</th>\n          <th scope=\"col\"></th>\n        </tr>\n      </thead>\n      <!-- <tbody>\n              <tr v-for=\"etapa in etapas\" :key=\"etapa.pk_id_etapa\">\n                <td>{{ etapa.pk_id_etapa }}</td>\n                <td>{{ etapa.nome_etapa }}</td>\n                <td>{{ etapa.acao }}</td>\n                <td>{{ etapa.tempo_execucao }} segundos</td>\n                <td><button class=\"btn btn-sm btn-danger\" @click=\"deletarEtapa(etapa)\">Deletar Etapa</button></td>\n              </tr>\n            </tbody> -->\n\n      <draggable v-model=\"etapas\" tag=\"tbody\" @start=\"drag=true\" \n  @end=\"drag=false\" item-key=\"pk_id_etapa\">\n        <template #item=\"{ etapas }\" >\n          <tr>\n            <td>{{ etapas.pk_id_etapa }}</td>\n            <td>{{ etapas.nome_etapa }}</td>\n            <td>{{ etapas.acao }}</td>\n            <td>{{ etapas.tempo_execucao }} segundos</td>\n            <td><button class=\"btn btn-sm btn-danger\" @click=\"deletarEtapa(etapas)\">Deletar Etapa</button></td>\n          </tr>\n        </template>\n      </draggable>\n    </table>\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <button class=\"btn btn-danger\" @click=\"deletarTarefa(tarefa)\">Excluir Tarefa</button>\n        <ModalCadastro class=\"row\" variant=\"primary\">\n        </ModalCadastro>\n\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\nh1 {\n  margin-top: 15px;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}